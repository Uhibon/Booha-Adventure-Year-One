<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Booha Adventure: Year One</title>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700;900&family=Noto+Sans+JP:wght@500;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0b1530;       /* deep navy */
  --ink:#ffffff;      /* text */
  --muted:#94a3b8;    /* slate */
  --gold:#ffd400;     /* booha yellow core */
  --gold-soft:#fff87a;/* soft highlight */
  --outline:#ffffff22;/* subtle borders */
  --radius:22px;
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{font-family:system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans JP", Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji"; background:var(--bg); color:var(--ink);}

/* --------- Layout --------- */
.wrapper{min-height:100%;display:flex;flex-direction:column}
.header{padding:20px 16px 10px;text-align:center}
.header h1{font-family:Cinzel,serif;letter-spacing:.5px;font-weight:900;font-size:clamp(24px,3.5vw,34px)}
.header p{margin-top:6px;color:var(--muted);font-size:clamp(12px,2.5vw,14px)}

.map{flex:1;display:grid;grid-template-columns:repeat(4,1fr);gap:14px;padding:16px;max-width:1100px;margin:0 auto}
@media (max-width:900px){.map{grid-template-columns:repeat(3,1fr)}}
@media (max-width:640px){.map{grid-template-columns:repeat(2,1fr)}}

.tile{position:relative;border:1px solid var(--outline);border-radius:var(--radius);padding:14px;min-height:120px;display:flex;flex-direction:column;justify-content:space-between;background:linear-gradient(180deg,#0d1a3a,#0b1530 40%);
  box-shadow:inset 0 0 0 1px #00000020, 0 6px 18px #00000030;cursor:pointer;transition:transform .18s ease, box-shadow .18s ease}
.tile:hover{transform:translateY(-2px);box-shadow:inset 0 0 0 1px #00000020, 0 10px 22px #00000045}
.tile h3{font-family:Cinzel,serif;font-size:16px}
.tile .sub{color:var(--muted);font-size:12px;margin-top:3px}
.tile .dots{position:absolute;inset:auto 10px 10px 10px;display:flex;gap:6px;opacity:.7}
.dot{width:7px;height:7px;border-radius:50%;background:#233057;box-shadow:0 0 0 1px #00000040 inset}
.dot.visited{background:#3de2ff}

/* Selected glow */
.tile.active{outline:1px solid #68a0ff55;box-shadow:0 0 0 2px #68a0ff22 inset, 0 0 28px #68a0ff26}

/* --------- Yellow Booha Ghost --------- */
.booha{position:absolute; width:64px; height:72px; pointer-events:none; transform:translate(-50%,-50%);
  filter:drop-shadow(0 6px 18px #ffd40055); z-index:10}
.booha .body{position:absolute; inset:0; border-radius:50% 50% 42% 42%/60% 60% 24% 24%;
  background:linear-gradient(#fff87a,#ffd400); box-shadow:inset 0 -6px 12px #b98f00aa}
.booha .frill{position:absolute;left:0;right:0;bottom:0;height:18px;background:#fff87a;border-radius:0 0 50% 50%;
  -webkit-clip-path:polygon(0 50%,8% 100%,16% 50%,24% 100%,32% 50%,40% 100%,48% 50%,56% 100%,64% 50%,72% 100%,80% 50%,88% 100%,96% 50%,100% 50%);
          clip-path:polygon(0 50%,8% 100%,16% 50%,24% 100%,32% 50%,40% 100%,48% 50%,56% 100%,64% 50%,72% 100%,80% 50%,88% 100%,96% 50%,100% 50%)}
.booha .eyes{position:absolute;top:34px;left:14px;right:14px;height:16px;}
.booha .eyes::before,.booha .eyes::after{content:'';position:absolute;top:0;width:12px;height:12px;border-radius:50%;background:#000}
.booha .eyes::before{left:8px}.booha .eyes::after{right:8px}

/* Float animation */
.bob{animation:bob 3s ease-in-out infinite}
@keyframes bob{0%,100%{transform:translate(-50%,-50%) translateY(0)}50%{transform:translate(-50%,-50%) translateY(-8px)}}

/* --------- Sparkly Trail --------- */
.spark{position:absolute;width:6px;height:6px;border-radius:50%;background:radial-gradient(circle at 35% 35%, #fff, #ffe66d 50%, transparent 70%);
  box-shadow:0 0 8px #ffd400aa; pointer-events:none; animation:spark 600ms ease-out forwards}
@keyframes spark{0%{transform:scale(.8);opacity:1} 60%{transform:scale(1.2);opacity:.9} 100%{transform:scale(0.2) translateY(6px);opacity:0}}

/* --------- Drawer (Weeks) --------- */
.drawer{position:fixed;left:0;right:0;bottom:-60vh;height:60vh;background:linear-gradient(180deg,#101d42,#0b1530);
  border-top:1px solid var(--outline); border-radius:22px 22px 0 0; box-shadow:0 -8px 30px #00000060; transition:bottom .3s ease; z-index:20}
.drawer.open{bottom:0}
.drawer .grab{height:28px;display:flex;align-items:center;justify-content:center}
.drawer .grab i{width:64px;height:5px;border-radius:999px;background:#ffffff22}
.drawer h2{font-family:Cinzel,serif;font-size:18px;padding:6px 18px;color:#e0e7ff}
.weeks{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;padding:12px 16px 20px}
@media(min-width:860px){.weeks{grid-template-columns:repeat(4,1fr)}}
.card{border:1px solid var(--outline);border-radius:18px;padding:12px;background:linear-gradient(180deg,#0f1b3e,#0b1530);
  display:flex;flex-direction:column;gap:8px;min-height:120px}
.card b{font-family:Cinzel,serif;font-size:14px}
.row{display:flex;gap:8px;margin-top:auto}
.btn{flex:1;text-align:center;padding:10px 12px;border-radius:14px;border:1px solid #ffffff26;background:#101a39;color:#e2e8f0;cursor:pointer;text-decoration:none;font-size:13px}
.btn:hover{background:#122045}
.btn.primary{border-color:#ffe06644;background:linear-gradient(180deg,#1a2550,#122045)}

/* Footer */
.footer{padding:14px 16px;color:#a8b1c4;font-size:12px;text-align:center;border-top:1px solid var(--outline)}
.footer a{color:#c9d6ff}

/* Visited marker on week cards */
.card.visited{outline:1px solid #3de2ff44;box-shadow:0 0 0 2px #3de2ff22 inset}

</style>
</head>
<body>
<div class="wrapper">
  <header class="header">
    <h1>Booha Adventure: Year One</h1>
    <p>January to December — Booha travels the town. Choose a month to enter. Progress is saved on this device.</p>
  </header>

  <main class="map" id="map">
    <!-- Tiles will be injected by JS with month names & subtitles -->
  </main>

  <div class="footer">Bryan's English School — Boo‑riculum Adventure • <a href="#" id="toMenu">Back to Main Menu</a></div>
</div>

<!-- Yellow Booha -->
<div class="booha bob" id="booha" aria-hidden="true">
  <div class="body"></div>
  <div class="frill"></div>
  <div class="eyes"></div>
</div>

<!-- Weeks Drawer -->
<section class="drawer" id="drawer" aria-hidden="true">
  <div class="grab"><i></i></div>
  <h2 id="drawerTitle">Month</h2>
  <div class="weeks" id="weeks"></div>
</section>

<script>
// ------------------------------
// Config
// ------------------------------
const MONTHS = [
  { key:'january',   label:'January',   sub:'New Beginnings & Goals' },
  { key:'february',  label:'February',  sub:'Daily Routines' },
  { key:'march',     label:'March',     sub:'Travel & Safety' },
  { key:'april',     label:'April',     sub:'World Around Us' },
  { key:'may',       label:'May',       sub:'Nature & Environment' },
  { key:'june',      label:'June',      sub:'Summer & Fun' },
  { key:'july',      label:'July',      sub:'Storytelling & Imagination' },
  { key:'august',    label:'August',    sub:'Nature & Outdoors' },
  { key:'september', label:'September', sub:'School Life' },
  { key:'october',   label:'October',   sub:'Transportation' },
  { key:'november',  label:'November',  sub:'Housing' },
  { key:'december',  label:'December',  sub:'Holidays & Reflections' }
];

const PLACEHOLDER_HREF = 'placeholder.html'; // one template page for now

// localStorage keys
const VISITED_KEY = 'booha_adventure_visited_weeks_v1';
const LAST_POS_KEY = 'booha_adventure_last_tile_pos_v1';

let visitedWeeks = JSON.parse(localStorage.getItem(VISITED_KEY) || '{}');

// ------------------------------
// Build Map
// ------------------------------
const mapEl = document.getElementById('map');
MONTHS.forEach((m, idx)=>{
  const tile = document.createElement('button');
  tile.className = 'tile';
  tile.setAttribute('data-month', m.key);
  tile.setAttribute('data-index', idx);
  tile.innerHTML = `
    <div>
      <h3>${m.label}</h3>
      <div class="sub">${m.sub}</div>
    </div>
    <div class="dots" aria-hidden="true">
      <span class="dot" data-w="1"></span>
      <span class="dot" data-w="2"></span>
      <span class="dot" data-w="3"></span>
      <span class="dot" data-w="4"></span>
    </div>
  `;
  tile.addEventListener('click', ()=>openMonth(m, tile));
  mapEl.appendChild(tile);
});

// apply visited dots on load
function refreshDots(){
  document.querySelectorAll('.tile').forEach(tile=>{
    const month = tile.getAttribute('data-month');
    for(let w=1; w<=4; w++){
      const dot = tile.querySelector(`.dot[data-w="${w}"]`);
      const key = `${month}-w${w}`;
      if(visitedWeeks[key]) dot.classList.add('visited');
    }
  });
}

// ------------------------------
// Booha movement
// ------------------------------
const booha = document.getElementById('booha');
function moveBoohaTo(el){
  const r = el.getBoundingClientRect();
  const x = r.left + r.width/2 + window.scrollX;
  const y = r.top + r.height/2 + window.scrollY;
  // leave sparkles along the way
  const steps = 12;
  const start = booha.getBoundingClientRect();
  const sx = start.left + start.width/2 + window.scrollX;
  const sy = start.top + start.height/2 + window.scrollY;
  for(let i=1;i<=steps;i++){
    setTimeout(()=>{
      const px = sx + (x - sx) * (i/steps);
      const py = sy + (y - sy) * (i/steps);
      spawnSpark(px, py);
    }, i*18);
  }
  booha.style.left = x + 'px';
  booha.style.top  = y + 'px';
  localStorage.setItem(LAST_POS_KEY, JSON.stringify({x,y}));
}
function spawnSpark(x,y){
  const s = document.createElement('i');
  s.className = 'spark';
  s.style.left = (x + (Math.random()*10-5)) + 'px';
  s.style.top  = (y + (Math.random()*10-5)) + 'px';
  document.body.appendChild(s);
  setTimeout(()=>s.remove(), 650);
}

// place booha initially (center of first tile or last saved)
window.addEventListener('load', ()=>{
  const first = document.querySelector('.tile');
  const saved = JSON.parse(localStorage.getItem(LAST_POS_KEY) || 'null');
  if(saved){
    booha.style.left = saved.x + 'px';
    booha.style.top  = saved.y + 'px';
  }else if(first){
    const r = first.getBoundingClientRect();
    booha.style.left = (r.left + r.width/2 + window.scrollX) + 'px';
    booha.style.top  = (r.top + r.height/2 + window.scrollY) + 'px';
  }
  refreshDots();
});

// keep booha aligned on resize (no animation)
window.addEventListener('resize', ()=>{
  const active = document.querySelector('.tile.active') || document.querySelector('.tile');
  if(!active) return;
  const r = active.getBoundingClientRect();
  booha.style.left = (r.left + r.width/2 + window.scrollX) + 'px';
  booha.style.top  = (r.top + r.height/2 + window.scrollY) + 'px';
});

// ------------------------------
// Drawer logic (Weeks + placeholders)
// ------------------------------
const drawer = document.getElementById('drawer');
const drawerTitle = document.getElementById('drawerTitle');
const weeksEl = document.getElementById('weeks');

function openMonth(month, tile){
  document.querySelectorAll('.tile').forEach(t=>t.classList.remove('active'));
  tile.classList.add('active');
  moveBoohaTo(tile);

  drawerTitle.textContent = `${month.label} — ${month.sub}`;
  weeksEl.innerHTML = '';
  for(let w=1; w<=4; w++){
    const card = document.createElement('div');
    card.className = 'card';
    const key = `${month.key}-w${w}`;
    if(visitedWeeks[key]) card.classList.add('visited');

    // build links with query params for placeholder page
    const d1 = `${PLACEHOLDER_HREF}?month=${month.key}&week=${w}&deck=1`;
    const d2 = `${PLACEHOLDER_HREF}?month=${month.key}&week=${w}&deck=2`;

    card.innerHTML = `
      <b>Week ${w}</b>
      <div class="row">
        <a class="btn primary" href="${d1}">Deck 1 (placeholder)</a>
        <a class="btn" href="${d2}">Deck 2 (placeholder)</a>
      </div>
    `;

    // mark visited when user clicks either link
    card.querySelectorAll('a').forEach(a=>{
      a.addEventListener('click', ()=>{
        visitedWeeks[key] = true; 
        localStorage.setItem(VISITED_KEY, JSON.stringify(visitedWeeks));
        refreshDots();
      });
    });

    weeksEl.appendChild(card);
  }
  drawer.classList.add('open');
}

// close drawer by tapping grab area
drawer.querySelector('.grab').addEventListener('click', ()=>drawer.classList.remove('open'));

// Back to menu href (no real nav yet)
document.getElementById('toMenu').addEventListener('click', (e)=>{e.preventDefault(); window.scrollTo({top:0,behavior:'smooth'});});
</script>
</body>
</html>


<!-- ===============================================
     SECOND FILE (add to repo root as: placeholder.html)
     =============================================== -->

<!--
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Deck Placeholder</title>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700;900&family=Noto+Sans+JP:wght@500;700&display=swap" rel="stylesheet">
<style>
:root{--bg:#0b1530;--ink:#fff;--outline:#ffffff26}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:system-ui,"Noto Sans JP",sans-serif;background:var(--bg);color:var(--ink);min-height:100dvh;display:grid;place-items:center}
.box{border:1px solid var(--outline);border-radius:22px;padding:22px 18px;max-width:720px;margin:16px;background:linear-gradient(180deg,#0f1b3e,#0b1530);box-shadow:0 10px 28px #0009}
.box h1{font-family:Cinzel,serif;font-size:22px;margin-bottom:4px}
.box p{color:#c7d2fe;margin:6px 0 14px}
.row{display:flex;gap:8px;flex-wrap:wrap}
.btn{display:inline-block;padding:10px 12px;border-radius:14px;border:1px solid #ffffff26;background:#101a39;color:#e2e8f0;text-decoration:none}
.btn:hover{background:#122045}
</style>
</head>
<body>
  <main class="box" id="box">
    <h1>Placeholder Deck</h1>
    <p id="desc">Loading…</p>
    <div class="row">
      <a class="btn" href="index.html">Back to Adventure Map</a>
    </div>
  </main>
<script>
  const qs = new URLSearchParams(location.search);
  const m = (qs.get('month')||'').replace(/^\w/,c=>c.toUpperCase());
  const w = qs.get('week');
  const d = qs.get('deck');
  const name = `${m || 'Month'} — Week ${w || '?'} — Deck ${d || '?'}`;
  document.title = name;
  document.querySelector('h1').textContent = name;
  document.getElementById('desc').textContent = 'Replace this page with your real deck URL later.';
</script>
</body>
</html>
-->
